<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IsekaiStatusMaker</title>
    <base href="/isekai-status-maker/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&family=Noto+Sans+JP:wght@400;700&family=Orbitron:wght@400;700&family=Shippori+Mincho:wght@400;700&display=swap"
        rel="stylesheet">
    <link href="_content/MudBlazor/MudBlazor.min.css?v=3D_UPDATE" rel="stylesheet" />
    <link href="IsekaiStatusMaker.styles.css" rel="stylesheet" />
    <link href="manifest.webmanifest" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
    <script>
        // Force unregister legacy service workers
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                for (let registration of registrations) {
                    registration.unregister();
                }
            });
        }
    </script>
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ğŸ—™</a>
    </div>
    <script src="js/novelPromo.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="_content/MudBlazor/MudBlazor.min.js?v=3D_UPDATE"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>
    <script src="js/novelPromo.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        window.downloadCard = async (elementId, fileName) => {
            const element = document.getElementById(elementId);
            if (!element) return;

            try {
                const canvas = await html2canvas(element, {
                    backgroundColor: null, // é€æ˜èƒŒæ™¯ã‚’ç¶­æŒ
                    useCORS: true, // ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ç”»åƒã‚’è¨±å¯
                    scale: 2 // é«˜è§£åƒåº¦åŒ–
                });

                const link = document.createElement('a');
                link.download = fileName;
                link.href = canvas.toDataURL("image/png");
                link.click();
            } catch (error) {
                console.error("Export failed:", error);
            }
        };
    </script>
</body>

</html>